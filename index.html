<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather+</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            height: 100%;
            background-size: 500% 500%;
            background-image: linear-gradient(to bottom right, #4f5bd5, #962fbf, #d62976, #fa7e1e);
            animation: shift 20s ease infinite;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
        }

        @keyframes shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .header {
            color: white;
            text-align: center;
            margin-top: 50px;
            font-size: 2.5rem;
        }

        .main {
            display: inline-block;
            backdrop-filter: blur(8px);
            background-color: rgba(255, 255, 255, 0.2);
            margin-top: 30px;
            padding: 20px 40px;
            border-radius: 12px;
            width: 600px;
        }

        .subhead {
            text-align: center;
            font-weight: 600;
            margin-bottom: 15px;
        }

        ul {
            list-style: none;
            padding: 0;
        }

        li {
            margin-top: 0.7rem;
            font-size: 1.1rem;
        }

        input {
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
            margin: 5px;
            width: 120px;
        }

        button {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
        }

        button:hover {
            background-color: #eee;
        }

        .input-container {
            display: flex;
            justify-content: center;
            margin-bottom: 1rem;
            gap: 1rem;
        }
    </style>
</head>
<body>
    <h1 class="header">Welcome to Weather+</h1>

    <div class="input-container">
        <input type="number" id="latInput" placeholder="Latitude" step="0.1">
        <input type="number" id="lonInput" placeholder="Longitude" step="0.1">
        <button onclick="fetchWeatherFromCoords()">Get Weather</button>
    </div>

    <section class="main">
        <h3 class="subhead">Weather Insights</h3>
        <ul>
            <li>Temperature: <span id="temp">--</span></li>
            <li>Wind Speed: <span id="wind">--</span></li>
            <li>Humidity: <span id="humidity">--</span></li>
            <li>Chance of Precipitation: <span id="precip-chance">--</span></li>
            <li>Surface Pressure: <span id="pressure">--</span></li>
        </ul>
    </section>

    <script>

        async function fetchWeatherFromCoords() {
            const lat = document.getElementById("latInput").value;
            const lon = document.getElementById("lonInput").value;

            if (!lat || !lon) {
                alert("Please enter both latitude and longitude!");
                return;
            }

            const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&hourly=temperature_2m,relative_humidity_2m,wind_speed_10m,precipitation_probability,surface_pressure&timezone=America%2FChicago&temperature_unit=fahrenheit&windspeed_unit=mph&precipitation_unit=inch`;

            try {
                const response = await fetch(url);
                const data = await response.json();

                document.getElementById("temp").textContent = `${data.current_weather.temperature} Â°F`;
                document.getElementById("wind").textContent = `${data.current_weather.windspeed} mph`;

                const nowHourISO = new Date().toISOString().slice(0,13) + ":00"; 
                const index = data.hourly.time.indexOf(nowHourISO);

                if (index !== -1) {
                    document.getElementById("humidity").textContent = `${data.hourly.relative_humidity_2m[index]} %`;
                    document.getElementById("precip-chance").textContent = `${data.hourly.precipitation_probability[index]} %`;
                    document.getElementById("pressure").textContent = `${data.hourly.surface_pressure[index]} hPa`;
                } else {
                    document.getElementById("humidity").textContent = "N/A";
                    document.getElementById("precip-chance").textContent = "N/A";
                    document.getElementById("pressure").textContent = "N/A";
                }
            } catch (err) {
                console.error("Error fetching weather:", err);
                alert("Could not fetch weather. Make sure coordinates are valid.");
            }
        }
    </script>
</body>
</html>

